# VLAN

LAN ნიშნავს მოწყობილობების ერთობლიობას ერთ ფიზიკურ ლოკაციაზე, მაგალითად - სახლში. ჩვენს სახლში ლეპტოპების, კომპიუტერების, ტელეფონების და სხვა მოწყობილობების ერთმანეთთან ქსელით დაკავშირება ქმნის LAN-ს. ჩვენ შეგვიძლია იგი დავყოთ ვირტუალურ ნაწილებად, ანუ შევქმნათ VLAN-ები, რაც საშუალებას მოგვცემს მოწყობილობები დავაჯგუფოთ ლოგიკურად. მაგალითად, შეგვიძლია შევქმნათ VLAN თითოეული ტიპის მოწყობილობისთვის. ერთში გავაწევრიანოთ ლეპტოპები, მეორეში კომპიუტერები, ხოლო მესამეში - ტელეფონები. ასევე შეგვიძლია დავყოთ ოთახების მიხედვითაც, მაგალითად, საძინებელში არსებული მოწყობილობები გავაწევრიანოთ ერთ VLAN-ში და ა.შ.

VLAN-ების გაყოფა ხდება Layer 2-ზე (OSI Model-ის მიხედვით). 

- Layer 1 - Physical Layer - მოიცავს ფიზიკურ კავშირს. ელექტროენერგიის გადაცემას და მსგავს საკითხებს.
- Layer 2 - Data Link Layer - პასუხისმგებელია ფიზიკური კავშირით მიღებული მონაცემების გადაცემაზე. მაგალითად, თუ ჩვენ პაკეტებს ვგზავნით ლეპტოპიდან კომპიუტერზე, ეს ლეიერი პასუხისმგებელია, რომ კომპიუტერიდან გაგზავნილი ეს ელექტრული იმპულსები სწორად მივა კომპიუტერამდე. სწორედ ამ ლეიერზე მუშაობს Switch. ამ ეტაპზე ხდება მოწყობილობების MAC მისამართით გარჩევა.
- Layer 3 - Network Layer - ეს ლეიერი პასუხისმგებელია პაკეტების დამისამართებაზე და მსგავს ლოგიკაზე. მაგალითად, რა ფიზიკური გზა უნდა აირჩიოს პაკეტმა და ა.შ. აქ მუშაობს Router და ამ ეტაპზე მოწყობილობების დამისამართება IP მისამართით ხდება.

ეს გულისხმობს 2 რამეს:

1. ამით ვხვდებით, რომ კონფიგურაცია მოხდება Switch-ზე.
2. სვიჩზე VLAN-ებს ვყოფთ ინტერფეისების მიხედვით. ინტერფეისი არის ფიზიკური პორტი სადაც ქსელის კაბელს ვაერთებთ.

ერთ VLAN-ში მყოფი მოწყობილობა ვერ დაუკავშირდება მეორე VLAN-ში მყოფ მოწყობილობას, ამისთვის საჭიროა როუტერმა გადაამისამართოს ჩვენი პაკეტები.

# Configuration

იმისთვის, რომ VLAN-ების შექმნა ყველა სვიჩზე არ მოგვიწიოს, შეგვიძლია გამოვიყენოთ ერთი სერვერ სვიჩი (`vtp mode server`) და კონფიგურაცია Trunk პორტის საშუალებით გადავცეთ სხვა სვიჩებს (`vtp mode client`).

### Server Switch

- თუ დავალება გვაქვს, რომ VTP პაროლი გამოვიყენოთ, მაშინ აუცილებელია, რომ ეს პაროლი დავადოთ ყველა სხვა სვიჩს.
- {vlan_num} შეგვიძლია გამოვიყენოთ ნებისმიერი, გარდა default რიცხვებისა - 1, 1002, 1003, 1004, 1005
-  Trunk მოდში მომუშავე პორტებზე უნდა შევაერთოთ სვიჩები ან როუტერები, რადგან სწორედ ამ პორტზე ხდება VLAN-ებზე ინფორმაციის გადაცემა.

```
- conf t
- vtp mode server
- vtp domain {domain_name}
- vtp password {password}

- vlan {vlan_num}
- name {vlan_name}
- exit

- interface range fastEthernet {range}
- switchport mode trunk
- exit
```

### Client Switch

- აქ ვუთითებთ რომელ VLAN-ს რომელი ინტერფეისი ეკუთვნოდეს.
- აუცილებელია იგივე პაროლის გამოყენება.
- fastEthernet მაგივრად შესაძლებელია მისი მოკლე ვერსია გამოვიყენოთ - fa.

```
- conf t
- vtp mode client
- vtp password {password}

- interface range fastEthernet {range}
- switchport mode access
- switchport access vlan {vlan_num}
- exit
```

- ამის შემდეგ უნდა შეგვეძლოს ერთ VLAN-ში მყოფი მოწყობილობების დაპინგვა.

### Routing between VLANs

- უნდა ჩავრთოთ როუტერის ის ინტერფეისი რომელზეც სვიჩი გვაქვს შეერთებული.
- სვიჩის ის ინტერფეისი, სადაც როუტერია შეერთებული უნდა იყოს Trunk.
-  gigabitEthernet მაგივრად შესაძლებელია მისი მოკლე ვერსია გამოვიყენოთ - g.
- `interface g 0/0.{vlan_order_num}` ეს ნიშნავს, რომ მაგალითად თუ ვაკეთებთ პირველი VLAN-ის კონფიგურაციას, გვექნება `interface g 0/0.1`, მეორეზე `interface g 0/0.2` და ასე შემდეგ.

```
- conf t
- interace g 0/0
- no shutdown
- exit

- interface g 0/0.{vlan_order_num}
- encapsulation dot1Q {vlan_num}
- ip address {gateway_address} {network_subnet}
- no shutdown
- exit
```

- ამის შემდეგ, თუ ჩვენ მოწყობილობებს Gateway მისამართად გავუწერთ ზემოთ მოცემულ მისამართს, მაშინ უნდა შეგვეძლოს VLAN-ებს შორის კომუნიკაცია.
