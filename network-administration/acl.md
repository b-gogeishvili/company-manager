# Access Control Lists (ACL)

წვდომის სიები საშუალებას გვაძლევს რესურსზე სხვადასხვა შეზღუდვები დავაყენოთ.
წვდომის სიის შექმნა შეიძლება როგორც როუტერზე, ასევე სვიჩზე და სხვა მოწყობილობებზე.
არსებობს სხვადასხვა ტიპის ACL:

1. **Standard Numbered ACL (სტანდარტული რიცხვითი პარამეტრით)** - ფილტრავს პაკეტებს წყაროს ანუ, source IP-ის მიხედვით.
ძირითადად ინიშნება დანიშნულებასთან, destination-თან ახლოს.
2. **Standard Named ACL (სტანდარტული სახელდებული)** - იგივე. განსხვავება არის ის, რომ რიცხვების მაგივრად
წვდომის სიას ვარქმევთ ლოგიკურ სახელებს. ძირითადად ინიშნება წყაროსთან, source-თან ახლოს.
3. **Extended Numbered ACL (გაფართოებული რიცხვითი პარამეტრით)** - ფილტრავს პაკეტს წყაროს და დანიშნულების, 
ანუ source და destination IP-ების, პორტების და პროტოკოლების მიხედვით.
4. **Extended Named ACL (გაფართოებული სახელდებული)** - იგივე. განსხვავება არის ის, რომ რიცხვების მაგივრად
წვდომის სიას ვარქმევთ ლოგიკურ სახელებს.

მაგალითად, თუ გვინდა, რომ რომელიმე ჰოსტს, ჰოსტებს ან თუნდაც მთლიან ქსელს შევუზღუდოთ წვდომა
სხვა რესურსზე, ქსელზე და ა.შ. სწორედ ამ შემთხვევაში გამოვიყენებთ წვდომის სიას.

წვდომის სიები პაკეტებს ფილტრავენ Wildcard მასკის მიხედვით!


# Standard ACL

სტანდარტული წვდომის სია შეგვიძლია დავნომროთ, რიცხვებით 1-დან 99-ის ჩათვლით და 1300-დან 1999-ის ჩათვლით.
იგი განსაზღვრავს permit/deny პარამეტრებს _მხოლოდ და მხოლოდ_ წყაროს (source) IP-ზე. უნდა გავითვალისწინოთ, რომ
თუ ჩვენ შევზღუდავთ წვდომას მაგალითად IP-დან 192.168.0.4, დაგვებლოკება წვდომა ყველა source-დან. ეს იმიტომ, რომ
"By default, there is an implicit deny all clause as a last statement with any ACL". ასევე, ჩვენი შეზღუდვები უმჯობესია,
რომ დავწეროთ ყველაზე სპეციფიკურიდან ზოგადისკენ. მაგ.:

```
- access-list 99 deny host 192.168.0.4 (most specific)
- access-list 99 permit any (least specific (We need to explicitly permit other sources))
```

`access-list {acl_num}` ბრძანება ქმნის სტანდარტულ რიცხვით წვდომის სიას. ამის შემდეგ უნდა ავირჩიოთ deny ან permit,
გააჩნია დაშვება გვინდა პაკეტების თუ დაბლოკვა. ხოლო, ამის შემდეგ უკვე გვაქვს რამდენიმე ვარიანტი:

1. any - ნებისმიერი წყარო.
2. `host {host_ip}` - კონკრეტული ჰოსტი.
3. `{network_ip} {wildcard_mask}` - ქსელი.

მაგალითად:

1. იმისთვის, რომ შევძღუდოთ ყველა წყარო:
`access-list {acl_num} deny any`

2. იმისთვის, რომ შევზღუდოთ კონკრეტული ჰოსტი, რომ არ შეეძლოს სხვა რესურსებზე კავშირი:
`access-list {acl_num} deny host {host_ip}`

3. იმისთვის, რომ შევზღუდოთ ერთ-ერთი ქსელი - 192.168.0.1 /24:
`access-list {acl_num} deny 192.168.0.1 0.0.0.255`

# Standard Named ACL

Standard Named ACL-იც იგივეა რაც ზემოთ ახსნილი. მხოლოდ ბრძანებები განსხვადება უმნიშვნელოდ.
თუ აქამდე ერთ ბრძანებაშივე ვწერდით ჩვენს ლოგიკას, ახლა ოდნავ სხვანაირადაა:

```
- ip access-list {some_name}
- deny {host_ip}
- permit {network_ip} {wildcard_mask}
- permit any
```

# Extended ACL

გაფართოებული წვდომის სია შეგვიძლია დავნომროთ, რიცხვებით 100-დან 199-ის ჩათვლით და 2000-დან 2699-ის ჩათვლით.
აქაც, ბოლოს აუცილებლად უნდა მივუთითოთ permit any. გაფართოებული ACL ფილტრავს როგორც წყაროს, ისე დანიშნულებას,
პორტებს, პროტოკოლებს და ა.შ.

ბრძანებების თანმიმდევრობა:

1. access-list
2. რიცხვი, ზემოთ აღნიშნულ რეინჯში
3. permit / deny
4. ip / tcp / udp
5. source
6. destination
7. protocol (optional)
8. interface (optional)


შემდეგი ბრძანება ნებას რთავს 10.1.1.1 ჰოსტს რომ HTTP პაკეტები, რომელიც 80 პორტზე იგზავნება, გაიგზავნოს 10.1.2.1 ჰოსტთან.
eq ნიშნავს equals. სხვა ვარიანტებია: lt - less than, gt - greater than.

```
access-list 100 permit tcp host 10.1.1.1 host 10.1.2.1 eq 80
```

ბრძანება იკითხება როგორც: _permit all tcp traffic from source host of 10.1.1.1 only to destination host of 10.1.2.1 that is http (80)_

გასათვალისწინებელია, რომ ჩვენ გვინდა PING შევზღუდოთ, რომლისთვისაც აუცილებელია tcp მაგივრად ip მივუთითოთ. ანუ:

```
ip access-list 100 permit ip
```` 

ამის შემდეგ პრინციპი იგივეა როგორც სტანდარტულ წვდომის სიაზე, ანუ ამ ბრძანებას მოსდევს:

1. any - ნებისმიერი წყარო.
2. `host {host_ip}` - კონკრეტული ჰოსტი.
3. `{network_ip} {wildcard_mask}` - ქსელი.

# Extended Named ACL

იგივეა რაც ზემოთ ახსნილი. ზედა მაგალითი რომ გადავიყვანოთ სახელდებულში იქნება:

```
- ip access-list extended {acl_name}
- permit tcp host 10.1.1.1 host 10.1.2.1 eq 80
- exit
```

# How to apply ACL

ACL-ის შექმნის შემდეგ ის უნდა დავაყენოთ ან შემომავალ (inbound) ან გამავალ (outbound) პაკეტებზე.
გასათვალისწინებელია, რომ access-list ყენდება ინტერფეისზე.

```
- conf t
- interface {some_interface}
- ip access-group {acl_num_or_name}
- exit
```